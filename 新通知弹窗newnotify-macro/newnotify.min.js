// newnotify.min.js, for SugarCube 2, by Chapel, edited by RyaraSUKI
(function(){var DEFAULT_TIME=2000;var isCssTime=/\d+m?s$/;var QUEUE_DELAY=150;var notifyQueue=[];var isNotifying=false;$(document.body).append("<div id='notify-container'></div>");function processQueue(){if(notifyQueue.length===0){isNotifying=false;return}isNotifying=true;var ev=notifyQueue.shift();var classList='macro-notify ';if(ev.class){if(typeof ev.class==='string'){classList+=ev.class}else if(Array.isArray(ev.class)){classList+=ev.class.join(' ')}}ev.delay=(typeof ev.delay==='number'&&!Number.isNaN(ev.delay))?ev.delay:DEFAULT_TIME;var $newNotify=$('<div class="notify-item"></div>').addClass(classList).wiki(ev.message);$('#notify-container').append($newNotify);void $newNotify[0].offsetWidth;setTimeout(()=>{$newNotify.addClass('open')},20);setTimeout(function(){$newNotify.addClass('close');setTimeout(function(){$newNotify.slideUp(300,function(){$(this).remove()})},500)},ev.delay);setTimeout(processQueue,QUEUE_DELAY)}$(document).on(':notify',function(ev){if(ev.message&&typeof ev.message==='string'){ev.message=ev.message.trim();notifyQueue.push(ev);if(!isNotifying){processQueue()}}});function notify(message,time,classes){if(typeof message!=='string')return;if(typeof time!=='number')time=false;$(document).trigger({type:':notify',message:message,delay:time,class:classes||''})}Macro.add('notify',{tags:null,handler:function(){var msg=this.payload[0].contents,time=false,classes=false;if(this.args.length>0){var cssTime=isCssTime.test(this.args[0]);if(typeof this.args[0]==='number'||cssTime){time=cssTime?Util.fromCssTime(this.args[0]):this.args[0];classes=(this.args.length>1)?this.args.slice(1).flat(Infinity):false}else{classes=this.args.flat(Infinity).join(' ')}}notify(msg,time,classes)}});setup.notify=notify})();
// end newnotify.min.js